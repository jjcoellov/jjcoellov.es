<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Imagen de cabecera aleatoria &mdash; Juanjo Coello</title>
    <link rel="stylesheet" href="/css/foundation.min.css"/>
    <link rel="stylesheet" href="/css/blog.css"/>
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet">
    <link href='//fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Gentium+Book+Basic:400,400italic,700,700italic' rel='stylesheet'
          type='text/css'>
    <link rel="icon" type="image/png" href="/img/favicon.png">
    <script src="/js/vendor/modernizr.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="//www.googletagmanager.com/gtag/js?id=UA-3378868-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-3378868-1');
    </script>
</head>

<body>

<header class="h-vspace">
    <div class="row">
        <div class="small-12 small-centered columns text-center">
            <hgroup>
                <h1><a href="/" class="title-link">Juanjo Coello</a></h1>
                <h6 class="subheader"><span class="hide-for-small inline">Software Developer & </span>Perpetual Wannabe
                </h6>
                <h6 class="subheader"><span class="hide-for-small inline">I tweet stuff at </span><a
                        href="http://www.twitter.com/jjcoellov" title="@jjcoellov" target="_blank">@jjcoellov</a></h6>
            </hgroup>
        </div>
    </div>
</header>
<nav>
    <div class="text-center">
        <ul class="inline-list h-inblock header-nav">
            <li><a href="/"><i class="fa fa-home fa-lg"></i> <span>Home</span></a></li>
            <li><a href="/about"><i class="fa fa-user fa-lg"></i> <span>About</span></a></li>
            <li><a href="/archive"><i class="fa fa-archive fa-lg"></i> <span>Archive</span></a></li>
        </ul>
    </div>
</nav>


<div class="row articles h-vspace--l">
    <article class="small-12 large-9 small-centered large-centered columns post">
        <header class="h-vspace">
            <h3>Imagen de cabecera aleatoria</h3>
        </header>
        <p>Como comenté en el <a href="http://jjcoellov.es/2009/01/10/algunos-cambios-en-la-apariencia-del-blog/">post anterior</a>, he añadido al blog un cambio que me agrada bastante: la de poder cargar una imagen aleatoria al entrar en la página. Bastante fácil todo, excepto por un detalle: como el theme que utilizo define la propiedad de la imagen en el CSS (background-image:url(ruta-imagen)), la generación de la alatoriedad no sabía cómo llevarla a cabo exactamente, hasta que descubrí que <a href="http://jquery.com/">jQuery</a> permite la modificación de atributos de las hojas de estilo (<a href="http://www.webintenta.com/cambiar-propiedades-css-con-jquery.html">enlace</a>). jQuery es una librería de funciones JavaScript que, básicamente, hace <em>mil virguerías</em>. Recomiendo pasarse por la página y echarle un vistazo. Pues bien, al final el código quedó tal que así: </p>
<p>En la cabecera, añadimos la librería:</p>
<pre lang="javascript">
<script src="http://www.jjcoellov.es/scripts/jquery.js" type="text/javascript"></script>
</pre>
<p>Y luego en el cuerpo agregamos este código:</p>
<pre lang="javascript">
   <script type="text/javascript">
   /* Cambiar la imagen de la cabecera aleatoriamente */ 
   
  /* Calcular un valor aleatorio entre 0 y el tamaño del array 
   *  pasado por parametro */
   function randomPos(a) {
      return Math.floor((Math.random() * a.length) % a.length);
   }
   
   /* Array con las rutas de las imágenes a utilizar */
   var rutasImg = [ "/imagenes/cabecera1.jpg", 
                    "/imagenes/cabecera2.jpg",
                    "/imagenes/cabecera3.jpg",];

   /* Hacemos uso de jQuery para modificar (o asignar) el valor 
    *  del atributo "background-image" al elemento 
    *  con id "cabecera"  */
   $(document).ready(function() { 
      var imagen = "url(" + rutasImg[randomPos(rutasImg)] + ")";
      $("#cabecera").css("background-image", imagen);
   });
  
   </script> 
</pre>
<p>Y eso es todo. Podría ser mucho más sofisticado: obtener todas las imagenes de un directorio especificado (aunque necesitaría algún lenguaje del lado del servidor para llevarlo a cabo), o generalizarlo para que obtenga una imagen aleatoria en cualquier elemento, simplemente ubicando el código dentro del mismo. Tambiés puede resultar innecesario añadir jQuery para hacer esta nimiedad, pero como resulta bastante sencillo utilizarlo decidí incluirlo. Es muy probable que haya métodos alternativos haciendo uso de funciones nativas de javascript, pero como primera aproximación creo que es adecuado. Si alguien busca algo similar, espero que le sirva de ayuda. </p>

        <footer>
    <aside>
        <div class="shr">
            <a class="shr-button" title="Share this post on Twitter" data-action="share-on-twitter"
               href="http://twitter.com/intent/tweet?url=http%3A%2F%2Fjjcoellov.es%2F2009%2F01%2F10%2Fimagen-de-cabecera-aleatoria%2F&text=Imagen%20de%20cabecera%20aleatoria%20%E2%80%94%20Juanjo%20Coello&via=jjcoellov"
               target="_blank">
                <i class="fa fa-twitter"></i>
            </a>
        </div>
            <span class="post-meta">
                <i class="fa fa-calendar post-meta-icon"></i><span class="h-tcolor-light">Jan 10, 2009</span>
            </span>
        
    </aside>
</footer>

     </article>
</div>

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-3378868-1', 'auto');
    ga('send', 'pageview');

</script>
</body>
</html>
